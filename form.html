<div class="form-container">
    <form target="secret-frame" method="post" id="admissionForm" onsubmit="submitForm()">
        <div class="form-step" id="step1">
    <div class="headingText" id="div1" tabindex="-1">Check eligibility of applicant.<br>Step 1 of 7.</div>

    <p class="welcome">Dear applicant, Welcome to Saint Joseph's Academy, where we help students prepare for government exams.</p>
    <p>To ensure that our applicants meet the eligibility criteria, we have set an age limit for enrollment.</p>
    <p class="age-limit">Only individuals aged between 16 and 40 years are eligible to apply for our academy.</p>

    <p>Please select your correct date of birth below to check if you meet our age limit rule and are eligible to proceed with the application process.</p>
<strong id="selectedDate"></strong>
<strong id="message" aria-live="polite"></strong>
<input type="date" id="dob" aria-hidden="true">
<button class="continue-button" id="dateButton">Select date of birth of applicant</button>
            <button class="continue-button" id="next1">Continue</button>
</div>
        <div class="form-step" id="step2">
    <div class="headingText" id="div2" tabindex="-1">Personal information of the Applicant.<br>Step 2 of 7.</div>
  <label id="firstNameLabel" tabindex="-1">First Name: *</label>
  <input type="text" id="firstName"><br>

  <label id="lastNameLabel" tabindex="-1">Last Name: *</label>
  <input type="text" id="lastName"><br>

  <label id="genderLabel" tabindex="-1">Gender: *</label>
  <select id="gender">
    <option value="">Select Gender of the Applicant</option>    <option value="male">Male</option>    <option value="female">Female</option>    <option value="Other">Other</option>
<label tabindex="-1">Your Date of birth: *</label>
<input type="text" id="your-dob" disabled><br>
<label tabindex="-1">Your Age: *</label>
<input type="text" id="your-age" disabled><br>
    <label id="mobileNumberLable" tabindex="-1">Mobile Number: *</label>
    <input type="tel" id="mobileNumber"><br>

    <label id="whatsappNumberLabel" tabindex="-1">WhatsApp Number: *</label>
    <label class="checkBox"><input type="checkbox" id="sameMobile"> Same as Mobile Number</label><br>
    <input type="tel" id="whatsappNumber"><br>
    <label id="emailLabel" tabindex="-1">Email address: *</label>
    <input type="email" id="email"><br>
            <button class="nextBtn" id="next2" type="button">Next</button>
        </div>
        <div class="form-step" id="step3">
    <div class="headingText" id="div3" tabindex="-1">Parent/Guardian Information.<br>Step 3 of 7.</div>
    <label id="parentFirstNameLabel" tabindex="-1">First Name of the Parent/Guardian: *</label>
    <input type="text" id="parentFirstName"><br>
    <label id="parentLastNameLabel" tabindex="-1">Last Name of the Parent/Guardian: *</label>
    <input type="text" id="parentLastName"><br>

    <label id="relationshipLabel" tabindex="-1">Relationship with Parent/Guardian: *</label>
    <select id="relationship">
        <option disabled selected value="">Select Relationship with Parent/Guardian</option>        <option value="Mother">Mother</option>        <option value="Father">Father</option>        <option value="Stepparent">Stepparent</option>        <option value="Grandparent">Grandparent</option>        <option value="Legal Guardian">Legal Guardian</option>
    </select><br>

    <label id="parentMobileLabel" tabindex="-1">Mobile Number of the Parent/Guardian: *</label>
    <input type="tel" id="parentMobile"><br>

    <label id="parentWhatsAppLabel" tabindex="-1">WhatsApp Number of the Parent/Guardian:</label>
<label class="checkBox"><input type="checkbox" id="sameParentMobile"> Same as Mobile Number</label><br>
    <input type="tel" id="parentWhatsApp"><br>
            <button class="prevBtn" id="prev3" type="button">Previous</button>
            <button class="nextBtn" id="next3" type="button">Next</button>
        </div>
        <div class="form-step" id="step4">
    <div class="headingText" id="div4" tabindex="-1">Address of the Applicant.<br>Step 4 of 7.</div>
<label id="stateLabel" tabindex="-1">State: *</label>
    <select id="state">
        <option disable selected value="">Select State of the Applicant</option>
        <option value="Gujarat">Gujarat</option>
    </select><br>

<label id="houseLabel" tabindex="-1">House Number/Building Name: *</label>
<input type="text" id="house"><br>

<label id="streetLabel" tabindex="-1">Street Name/Locality: *</label>
<input type="text" id="street"><br>

<label id="areaLabel" tabindex="-1">Area/Village: *</label>
<input type="text" id="area"><br>

<label id="cityLabel" tabindex="-1">City/Town/Tehsil: *</label>
<input type="text" id="city"><br>

<label id="districtLabel" tabindex="-1">District: *</label>
    <select id="district">
        <option disable selected value="">Select district of the Applicant</option>
        <option value="Ahmedabad">Ahmedabad</option>
    </select><br>

<label id="pinCodeLabel" tabindex="-1">Pin Code: *</label>
<input type="tel" id="pinCode"><br>
            <button class="prevBtn" id="prev4" type="button">Previous</button>
            <button class="nextBtn" id="next4" type="button">Next</button>
        </div>
        <div class="form-step" id="step5">
    <div class="headingText" id="div5" tabindex="-1">Additional Information.<br>Step 5 of 7.</div>
  <label id="educationLabel" tabindex="-1">Highest Level of Education of the Applicant: *</label>
        <select id="education">
            <option value="">Select highest level of education of the Applicant</option>            <option value="10th Standard">10th Standard</option>            <option value="12th Standard">12th Standard</option>            <option value="Diploma">Diploma</option>            <option value="Graduate">Graduate</option>            <option value="Postgraduate">Postgraduate</option>            <option value="Postgraduate and above">Postgraduate and above</option>
        </select><br>
<label for="courseLabel" tabindex="-1">Select the course in which you want to be enrolled: *</label>
<select id="course">
  <option value="">Select</option>
  <option value="Maths and Reasoning">Maths and Reasoning</option>
  <option value="English">English</option>
  <option value="Both">Both of These, Maths and Reasoning, English</option>
</select><br>



    <label id="disabilityStatusLabel" tabindex="-1">Do you have any disability?</label>
    <select id="disabilityStatus" onchange="toggleDisabilityFields()">
        <option value="">Select</option>
        <option value="Yes, I have disability">Yes, I have disability</option>
        <option value="No, I have no disability">No, I have no disability</option>
    </select><br>

    <div id="disability-yes" style="display: none;">
        <label id="disabilityTypeLabel" tabindex="-1">Type of Disability of the Applicant: *</label>
        <select id="disabilityType">
            <option value="">Select Type of Disability</option>
            <option value="Visually Impaired">Visually Impaired (Blind)</option>
            <option value="Physically Handicap">Physically Handicapped</option>
        </select><br>

        <label id="disabilityPercentageLabel" tabindex="-1">Disability Percentage of the Applicant: *</label>
        <select id="disabilityPercentage">
            <option value="">Select Disability Percentage</option>
            <option value="40%">40%</option>
            <option value="50%">50%</option>
            <option value="60%">60%</option>
            <option value="70%">70%</option>
            <option value="80%">80%</option>
            <option value="90%">90%</option>
            <option value="100%">100%</option>
        </select><br>

        <label id="certificateStatusLabel" tabindex="-1">Do you have any disability certificate? *</label>
        <select id="certificateStatus" onchange="toggleCertificateFields()">
            <option value="">Select</option>
            <option value="Yes, I have disability certificate">Yes, I have disability certificate</option>
            <option value="No, I don't have any disability certificate">No, I don't have any disability certificate</option>
        </select><br>
    </div>

    <div id="certificate-no" style="display: none;">
        <label id="agreementLabel" tabindex="-1">Give your consent to proceed: *</label>
        <input type="checkbox" id="agreement" name="agreement">
        <label for="agreement">
            I hereby declare that I do not currently possess any document or official proof to validate my disability status. I understand that as soon as I receive the official document verifying my disability, I am obligated to submit a copy of the document to Saint Joseph's Academy immediately.
        </label>
    </div>

    <button class="prevBtn" id="prev5" type="button">Previous</button>
    <button class="nextBtn" id="next5" type="button">Next</button>
</div>
<div class="form-step" id="step6">
    <div class="headingText" id="div6" tabindex="-1">Upload documents.<br>Step 6 of 7.</div>

    <label id="photoLabel" tabindex="-1">Passport style photo: *</label>
    <input type="file" id="photo"><br>

    <label id="aadhaarFrontLabel" tabindex="-1">Aadhaar Card: * (Front Side)</label>
    <input type="file" id="aadhaarFront"><br>

    <label id="aadhaarBackLabel" tabindex="-1">Aadhaar Card: * (Back Side)</label>
    <input type="file" id="aadhaarBack"><br>

    <div id="certificate-yes" style="display: none;">
        <label id="udidLabel" tabindex="-1">UDID Card/Disability Certificate: *</label>
        <input type="file" id="udid"><br>
    </div>

    <button class="prevBtn" id="prev6" type="button">Previous</button>
    <button class="nextBtn" id="next6" type="button">Next</button>
</div>
        <div class="form-step" id="step7">
    <div class="headingText" id="div7" tabindex="-1">Review your Information: Step 7 of 7.</div>
    <div id="reviewInfo"></div>
    <label class="terms-acknowledg"><input type="checkbox" value="[ ] I have agreed to the terms and conditions." id="termsConditions">[ ] I have agree to the terms and conditions.</label><br>
<label class="terms-acknowledg">    <input type="checkbox" value="[ ] I acknowledged that the information provided in this form is true and accurate to the best of my knowledge" id="acknowledgment">[ ] I acknowledge that the information provided in this form is true and accurate to the best of my knowledge.</label><br>
<strong id="noteMessage">By checking the boxes above, you confirm that you have agreed our terms and conditions and that the information you have provided is correct. Thank you for your submission.</strong><br>
            <button class="prevBtn" id="prev7" type="button">Previous</button>
        <button id="submitBtn" type="submit">Submit</button>
        </div>

    </form>
</div>
<div id="alertBox">
<p id="errorStatus" aria-live="polite"></p>
</div>

<iframe name="secret-frame" width="0" height="0" border="0" style="display: none;"></iframe>
<script>
function alertMessage(message) {   
document.getElementById("alertBox").style.display="block";
document.getElementById("errorStatus").innerHTML = message;
setTimeout(function(){
document.getElementById("alertBox").style.display="none";
    document.getElementById("errorStatus").innerHTML = "";
}, 5000);
}

let today = new Date(); // Current system date

// Function to convert month number to month name
const getMonthName = (month) => {
    const monthNames = [
        'January', 'February', 'March', 'April', 'May', 'June', 
        'July', 'August', 'September', 'October', 'November', 'December'
    ];
    return monthNames[month];
};

document.getElementById("dob").addEventListener('change', function() {
    let dob = this.value;
    let selectedDate = new Date(dob);

    if (!today) {
        alertMessage("Unable to fetch current date. Please try again.");
        this.value = '';
        return;
    }

    if (selectedDate > today) {
        alertMessage("Please select a valid date of birth (not a future date).");
        this.value = ''; // Clear the input field if a future date is selected
        return;
    }

    let age = calculateAge(dob);

    if (isNaN(age)) {
        alertMessage("Please enter a valid date of birth.");
        this.value = '';
        return;
    }

    // Formatting the selected date to (Day Month Date Year)
    const formattedDate = `${selectedDate.getDate()} ${getMonthName(selectedDate.getMonth())} ${selectedDate.getFullYear()}`;
    document.getElementById('selectedDate').innerHTML = "Selected birthdate: <br>" + formattedDate;

    let birthDate = new Date(dob);
    let months = today.getMonth() - birthDate.getMonth();
    let days = today.getDate() - birthDate.getDate();

    if (months < 0 || (months === 0 && days < 0)) {
        age--;
        months += 12;
    }
    if (days < 0) {
        months--;
        days += new Date(today.getFullYear(), today.getMonth(), 0).getDate();
    }

    let yearsLabel = age === 1 ? 'year' : 'years';
    let monthsLabel = months === 1 ? 'month' : 'months';
    let daysLabel = days === 1 ? 'day' : 'days';

    let ageMessage = `Your age is ${age} ${yearsLabel}, ${months} ${monthsLabel}, and ${days} ${daysLabel}.`;

    if (age < 16 || age > 40) {
        document.getElementById('message').innerHTML = 
            "Sorry, only individuals aged between 16 and 40 are eligible to fill this form." +
            "<br>" + ageMessage;
        document.getElementById("dateButton").disabled = true;
    } else {
        document.getElementById('message').innerHTML = 
            "Congratulations! You are eligible to proceed." + 
            "<br>" + ageMessage + 
            "<br>Click continue to begin enrollment.";
        document.getElementById("next1").style.display = "block";
        document.getElementById("dateButton").style.display = "none";
    }

    // Save age in a global variable for transfer
    document.getElementById("dob").dataset.age = age;
});

function calculateAge(dateString) {
    let birthDate = new Date(dateString);

    if (isNaN(birthDate.getTime())) {
        return NaN;
    }

    let age = today.getFullYear() - birthDate.getFullYear();

    if (today.getMonth() < birthDate.getMonth() || 
        (today.getMonth() === birthDate.getMonth() && today.getDate() < birthDate.getDate())) {
        age--;
    }

    return age;
}

document.getElementById('dateButton').addEventListener('click', function() {
    document.getElementById('dob').click();
});

// Transition from Step 1 to Step 2
document.getElementById("next1").addEventListener('click', function() {
    // Get the selected date and age from Step 1
    const selectedDate = document.getElementById("selectedDate").textContent.replace("Selected birthdate: ", "").trim();
    const age = document.getElementById("dob").dataset.age;

    // Set the values in Step 2
    document.getElementById("your-dob").value = selectedDate;
    document.getElementById("your-age").value = age + " years";
});

let currentStep = 1;

function validateStep(step) {
    let isValid = true;

    let alertShown = false;
    if (step === 1) {
        let dob = document.getElementById("dob").value;
        let age = calculateAge(dob);
        if (dob === "" && !alertShown) {
            alertMessage("Please select date of birth of the applicant.");
            isValid = false;
            alertShown = true;
        }
        if (age < 16 || age > 40 && !alertShown) {
            alertMessage("Sorry, only individuals aged between 16 and 40 are eligible to fill this form. ");
            isValid = false;
            alertShown = true;
        }
    }
    if (step === 2) {
        let firstName = document.getElementById("firstName").value;
        let lastName = document.getElementById("lastName").value;
        let gender = document.getElementById("gender").value;
    let mobileNumber = document.getElementById("mobileNumber").value;
    let whatsappNumber = document.getElementById("whatsappNumber").value;
        let email = document.getElementById("email").value;
        if (firstName.length < 3 && !alertShown) {
            document.getElementById("firstNameLabel").focus();
            alertMessage("Please enter a valid First Name of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (firstName.length > 15 && !alertShown) {
            document.getElementById("firstNameLabel").focus();
            alertMessage("Please enter a valid First Name of the Applicant.");
            isValid = false;
            alertShown = true;
        }
if (!validateAlphabetsInput(firstName) && !alertShown) {
    document.getElementById("firstNameLabel").focus();
    alertMessage("Please enter a valid First Name of the Applicant using alphabets only.");
    isValid = false;
    alertShown = true;
}
        if (lastName.length < 3 && !alertShown) {
            document.getElementById("lastNameLabel").focus();
            alertMessage("Please enter a valid Last Name of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (lastName.length > 15 && !alertShown) {
            document.getElementById("lastNameLabel").focus();
            alertMessage("Please enter a valid Last Name of the Applicant.");
            isValid = false;
            alertShown = true;
        }
if (!validateAlphabetsInput(lastName) && !alertShown) {
    document.getElementById("lastNameLabel").focus();
    alertMessage("Please enter a valid Last Name of the Applicant using alphabets only.");
    isValid = false;
    alertShown = true;
}
        if (gender === "" && !alertShown) {
            document.getElementById("genderLabel").focus();
            alertMessage("Please select gender of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (mobileNumber.length < 10 && !alertShown) {
            document.getElementById("mobileNumberLabel").focus();
            alertMessage("Please enter a valid Mobile Number of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (mobileNumber.length > 10 && !alertShown) {
            document.getElementById("mobileNumberLabel").focus();
            alertMessage("Please enter a valid Mobile Number of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (!validateMobileNumber(mobileNumber) && !alertShown) {
            document.getElementById("mobileNumberLabel").focus();
    alertMessage("Please enter a valid Mobile Number of the Applicant that consists only of digits, does not contain any symbols or alphabets, does not start with 0-5, and does not have any single digit repeated more than 10 times consecutively.");
            isValid = false;
            alertShown = true;
        }
        if (whatsappNumber.length < 10 && !alertShown) {
            document.getElementById("whatsappNumberLabel").focus();
            alertMessage("Please enter a valid WhatsApp Number of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (whatsappNumber.length > 10 && !alertShown) {
            document.getElementById("whatsappNumberLabel").focus();
            alertMessage("Please enter a valid WhatsApp Number of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (!validateMobileNumber(whatsappNumber) && !alertShown) {
            document.getElementById("whatsappNumberLabel").focus();
    alertMessage("Please enter a valid WhatsApp Number of the Applicant that consists only of digits, does not contain any symbols or alphabets, does not start with 0-5, and does not have any single digit repeated more than 10 times consecutively.");
            isValid = false;
            alertShown = true;
        }
        if (email.length < 15 && !alertShown) {
            document.getElementById("emailLabel").focus();
            alertMessage("Please enter a valid Email Address of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (email.length > 42 && !alertShown) {
            document.getElementById("emailLabel").focus();
            alertMessage("Please enter a valid Email Address of the Applicant.");
            isValid = false;
            alertShown = true;
        }
        if (!validateEmailAddress(email) && !alertShown) {
            document.getElementById("emailLabel").focus();
            alertMessage("Please enter a valid email address of the Applicant from the allowed domains: @gmail.com, @outlook.com, @hotmail.com, @yahoo.com");
            isValid = false;
            alertShown = true;
        }
}
    if (step === 3) {
        let parentFirstName = document.getElementById("parentFirstName").value;
        let parentLastName = document.getElementById("parentLastName").value;
        let relationship = document.getElementById("relationship").value;
        let parentMobile = document.getElementById("parentMobile").value;
        let parentWhatsApp = document.getElementById("parentWhatsApp").value;
        if (parentFirstName.length < 3 && !alertShown) {
            document.getElementById("parentFirstNameLabel").focus();
            alertMessage("Please enter a valid First Name of the Parent/Guardian.");
            isValid = false;
            alertShown = true;
        }
        if (parentFirstName.length >15 && !alertShown) {
            document.getElementById("parentFirstNameLabel").focus();
            alertMessage("Please enter a valid First Name of the Parent/Guardian.");
            isValid = false;
            alertShown = true;
        }
if (!validateAlphabetsInput(parentFirstName) && !alertShown) {
    document.getElementById("parentFirstNameLabel").focus();
    alertMessage("Please enter a valid First Name of the Parent/Guardian using alphabets only.");
    isValid = false;
    alertShown = true;
}
        if (parentLastName.length < 3 && !alertShown) {
            document.getElementById("parentLastNameLabel").focus();
            alertMessage("Please enter a valid Last Name of the Parent/Guardian.");
            isValid = false;
            alertShown = true;
        }
        if (parentLastName.length > 15 && !alertShown) {
            document.getElementById("parentLastNameLabel").focus();
            alertMessage("Please enter a valid Last Name of the Parent/Guardian.");
            isValid = false;
            alertShown = true;
        }
if (!validateAlphabetsInput(parentLastName) && !alertShown) {
    document.getElementById("parentLastNameLabel").focus();
    alertMessage("Please enter a valid Last Name of the Parent/Guardian using alphabets only.");
    isValid = false;
    alertShown = true;
}
        if ( relationship === "" && !alertShown) {
            document.getElementById("relationshipLabel").focus();
            alertMessage("Please select the type of relationship the Applicant has with the parent/guardian from the dropdown list.");
            isValid = false;
            alertShown = true;
        }
        if (parentMobile.length < 10 && !alertShown) {
            document.getElementById("parentMobileLabel").focus();
            alertMessage("Please enter a valid Mobile Number of the Parent/Guardian.");
            isValid = false;
            alertShown = true;
        }
        if (parentMobile.length > 10 && !alertShown) {
            document.getElementById("parentMobileLabel").focus();
            alertMessage("Please enter a valid Mobile Number of the Parent/Guardian.");
            isValid = false;
            alertShown = true;
        }
        if (!validateMobileNumber(parentMobile) && !alertShown) {
            document.getElementById("parentMobileLabel").focus();
    alertMessage("Please enter a valid Mobile Number of the Parent/Guardian that consists only of digits, does not contain any symbols or alphabets, does not start with 0-5, and does not have any single digit repeated more than 10 times consecutively.");
            isValid = false;
            alertShown = true;
        }
        if (parentWhatsApp.length < 10 && !alertShown) {
            document.getElementById("parentWhatsAppLabel").focus();
            alertMessage("Please enter a valid WhatsApp Number of the Parent/Guardian.");
            isValid = false;
            alertShown = true;
        }
        if (parentWhatsApp.length > 10 && !alertShown) {
            document.getElementById("parentWhatsAppLabel").focus();
            alertMessage("Please enter a valid WhatsApp Number of the Parent/Guardian.");
            isValid = false;
            alertShown = true;
        }
        if (!validateMobileNumber(parentWhatsApp) && !alertShown) {
            document.getElementById("parentWhatsAppLabel").focus();
    alertMessage("Please enter a valid WhatsApp Number of the Parent/Guardian that consists only of digits, does not contain any symbols or alphabets, does not start with 0-5, and does not have any single digit repeated more than 10 times consecutively.");
            isValid = false;
            alertShown = true;
        }
}
if (step === 4) {
    let state = document.getElementById("state").value;
    let house = document.getElementById("house").value.trim();
    let street = document.getElementById("street").value.trim();
    let area = document.getElementById("area").value.trim();
    let city = document.getElementById("city").value.trim();
    let district = document.getElementById("district").value;
    let pinCode = document.getElementById("pinCode").value.trim();
    if (state === "" && !alertShown) {
        document.getElementById("stateLabel").focus();
        alertMessage("Please select State of the Applicant from the dropdown list.");
        isValid = false;
        alertShown = true;
    }

    if (house === "" && !alertShown) {
        document.getElementById("houseLabel").focus();
        alertMessage("Please enter House Number/Building Name.");
        isValid = false;
        alertShown = true;
    }

    if (street === "" && !alertShown) {
        document.getElementById("streetLabel").focus();
        alertMessage("Please enter Street Name/Locality.");
        isValid = false;
        alertShown = true;
    }

    if (area === "" && !alertShown) {
        document.getElementById("areaLabel").focus();
        alertMessage("Please enter Area/Village.");
        isValid = false;
        alertShown = true;
    }

    if (city === "" && !alertShown) {
        document.getElementById("cityLabel").focus();
        alertMessage("Please enter City/Town/Tehsil.");
        isValid = false;
        alertShown = true;
    }

    if (district === "" && !alertShown) {
        document.getElementById("districtLabel").focus();
        alertMessage("Please select district of the Applicant from the dropdown list.");
        isValid = false;
        alertShown = true;
    }


    if (pinCode === "" && !alertShown) {
        document.getElementById("pinCodeLabel").focus();
        alertMessage("Please enter Pin Code.");
        isValid = false;
        alertShown = true;
    } else if (pinCode.length !== 6 && !alertShown) {
        document.getElementById("pinCodeLabel").focus();
        alertMessage("Please enter a valid 6-digit Pin Code.");
        isValid = false;
        alertShown = true;
    } else if (!/^\d{6}$/.test(pinCode) && !alertShown) {
        document.getElementById("pinCodeLabel").focus();
        alertMessage("Pin Code must contain only digits.");
        isValid = false;
        alertShown = true;
    }

}
if (step === 5) {
    let education = document.getElementById("education").value;
    let course = document.getElementById("course").value;
    let disabilityStatus = document.getElementById("disabilityStatus").value;
    let disabilityType = document.getElementById("disabilityType").value;
    let disabilityPercentage = document.getElementById("disabilityPercentage").value;
    let certificateStatus = document.getElementById("certificateStatus").value;
    let agreement = document.getElementById("agreement").checked;

    if (education === "" && !alertShown) {
        document.getElementById("educationLabel").focus();
        alertMessage("Please select the highest level of education of the Applicant.");
        isValid = false;
        alertShown = true;
    }

    if (course === "" && !alertShown) {
        document.getElementById("courseLabel").focus();
        alertMessage("Please select the course.");
        isValid = false;
        alertShown = true;
    }
    if (disabilityStatus === "Yes, I have disability") {
        // Show Disability Fields
        document.getElementById("disability-yes").style.display = "block";

        // Validate Disability Fields
        if (disabilityType === "" && !alertShown) {
            document.getElementById("disabilityTypeLabel").focus();
            alertMessage("Please select the Type of Disability of the Applicant.");
            isValid = false;
            alertShown = true;
        }

        if (disabilityPercentage === "" && !alertShown) {
            document.getElementById("disabilityPercentageLabel").focus();
            alertMessage("Please select the Disability Percentage of the Applicant.");
            isValid = false;
            alertShown = true;
        }

        if (certificateStatus === "Yes, I have disability certificate") {
            // Show Certificate-Yes Fields
            document.getElementById("certificate-yes").style.display = "block";
            document.getElementById("certificate-no").style.display = "none";

            // Stop Agreement Validation
            agreement = true;
        } else if (certificateStatus === "No, I don't have any disability certificate") {
            // Show Certificate-No Fields
            document.getElementById("certificate-no").style.display = "block";
            document.getElementById("certificate-yes").style.display = "none";

            // Validate Agreement
            if (!agreement && !alertShown) {
                document.getElementById("agreementLabel").focus();
                alertMessage("Please provide your consent to proceed.");
                isValid = false;
                alertShown = true;
            }
        } else if (certificateStatus === "" && !alertShown) {
            document.getElementById("certificateStatusLabel").focus();
            alertMessage("Please select whether you have a Disability Certificate.");
            isValid = false;
            alertShown = true;
        }
    } else if (disabilityStatus === "No, I have no disability") {
        // Hide Disability Fields
        document.getElementById("disability-yes").style.display = "none";
        document.getElementById("certificate-no").style.display = "none";
        document.getElementById("certificate-yes").style.display = "none";

        // Stop all related validations
        disabilityType = true;
        disabilityPercentage = true;
        certificateStatus = true;
        agreement = true;
    } else if (disabilityStatus === "" && !alertShown) {
        document.getElementById("disabilityStatusLabel").focus();
        alertMessage("Please select whether you have any Disability.");
        isValid = false;
        alertShown = true;
    }
}
if (step === 6) {
    let photo = document.getElementById("photo").files[0];
    let aadhaarFront = document.getElementById("aadhaarFront").files[0];
    let aadhaarBack = document.getElementById("aadhaarBack").files[0];
    let udid = document.getElementById("udid").files[0];
    // Validate Passport Size Photo
    if (photo) {
        let validFormats = ["image/jpeg", "image/jpg", "image/png"];
        if (!validFormats.includes(photo.type)) {
            document.getElementById("photoLabel").focus();
            alertMessage("Passport photo must be in JPG, JPEG, or PNG format.");
            isValid = false;
            alertShown = true;
        } else if (photo.size > 300 * 1024) { // 300 KB
            document.getElementById("photoLabel").focus();
            alertMessage("Passport photo size must not exceed 300 KB.");
            isValid = false;
            alertShown = true;
        } else {
            let img = new Image();
            img.onload = function () {
                if (this.width !== 400 || this.height !== 500) {
                    document.getElementById("photoLabel").focus();
                    alertMessage("Passport photo dimensions must be 400x500 pixels.");
                    isValid = false;
                    alertShown = true;
                }
            };
            img.src = URL.createObjectURL(photo);
        }
    } else if (!alertShown) {
        document.getElementById("photoLabel").focus();
        alertMessage("Please upload a passport-style photo.");
        isValid = false;
        alertShown = true;
    }

    // Validate Aadhaar Front
    if (aadhaarFront) {
        let validFormats = ["image/jpeg", "image/jpg"];
        if (!validFormats.includes(aadhaarFront.type)) {
            document.getElementById("aadhaarFrontLabel").focus();
            alertMessage("Aadhaar Front must be in JPG or JPEG format.");
            isValid = false;
            alertShown = true;
        } else if (aadhaarFront.size > 1 * 1024 * 1024) { // 1 MB
            document.getElementById("aadhaarFrontLabel").focus();
            alertMessage("Aadhaar Front size must not exceed 1 MB.");
            isValid = false;
            alertShown = true;
        }
    } else if (!alertShown) {
        document.getElementById("aadhaarFrontLabel").focus();
        alertMessage("Please upload the front side of the Aadhaar card.");
        isValid = false;
        alertShown = true;
    }

    // Validate Aadhaar Back
    if (aadhaarBack) {
        let validFormats = ["image/jpeg", "image/jpg"];
        if (!validFormats.includes(aadhaarBack.type)) {
            document.getElementById("aadhaarBackLabel").focus();
            alertMessage("Aadhaar Back must be in JPG or JPEG format.");
            isValid = false;
            alertShown = true;
        } else if (aadhaarBack.size > 1 * 1024 * 1024) { // 1 MB
            document.getElementById("aadhaarBackLabel").focus();
            alertMessage("Aadhaar Back size must not exceed 1 MB.");
            isValid = false;
            alertShown = true;
        }
    } else if (!alertShown) {
        document.getElementById("aadhaarBackLabel").focus();
        alertMessage("Please upload the back side of the Aadhaar card.");
        isValid = false;
        alertShown = true;
    }

    // Validate Disability Certificate (UDID) only if certificate-yes is shown
    if (document.getElementById("certificate-yes").style.display === "block" && udid) {
        let validFormats = ["image/jpeg", "image/jpg"];
        if (!validFormats.includes(udid.type)) {
            document.getElementById("udidLabel").focus();
            alertMessage("Disability Certificate must be in JPG or JPEG format.");
            isValid = false;
            alertShown = true;
        } else if (udid.size > 1 * 1024 * 1024) { // 1 MB
            document.getElementById("udidLabel").focus();
            alertMessage("Disability Certificate size must not exceed 1 MB.");
            isValid = false;
            alertShown = true;
        }
    } else if (document.getElementById("certificate-yes").style.display === "block" && !alertShown) {
        document.getElementById("udidLabel").focus();
        alertMessage("Please upload the UDID Card/Disability Certificate.");
        isValid = false;
        alertShown = true;
    }
}
    if (step === 7) {
            let termsConditions = document.getElementById("termsConditions").checked;
            let acknowledgment = document.getElementById("acknowledgment").checked;
        if (termsConditions == false && !alertShown) {
document.getElementById("termsConditions").focus();
            alertMessage("Please agree to the terms and conditions before submitting.");
            isValid = false;
            alertShown = true;
        }
        if (acknowledgment == false && !alertShown) {
document.getElementById("acknowledgment").focus();
            alertMessage("Please acknowledge the information before submitting.");
            isValid = false;
            alertShown = true;
        }
}


    return isValid;
}
function handleCheckboxChange(checkboxId, sourceFieldId, targetFieldId, message, labelId) {
    const checkbox = document.getElementById(checkboxId);

    checkbox.addEventListener('change', function () {
        const sourceValue = document.getElementById(sourceFieldId).value;

        // Validate the source value
        if (sourceValue.length !== 10 || !validateMobileNumber(sourceValue)) {
            alertMessage(message);
            document.getElementById(labelId).focus();
            checkbox.checked = false;
        } else if (this.checked) {
            document.getElementById(targetFieldId).value = sourceValue;
            alertMessage("Applied successfully!");
        } else {
            document.getElementById(targetFieldId).value = '';
            validateStep(currentStep);
        }
    });
}
handleCheckboxChange(
    'sameMobile',
    'mobileNumber',
    'whatsappNumber',
    "Please enter a valid 10 digit Mobile Number of the Applicant.",
    'mobileNumberLabel'
);

handleCheckboxChange(
    'sameParentMobile',
    'parentMobile',
    'parentWhatsApp',
    "Please enter a valid 10 digit mobile number of the Parent/Guardian.",
    'parentMobileLabel'
);
    document.getElementById('termsConditions').addEventListener('change', function() {
        if (this.checked) {
    alertMessage("You have agreed to the terms and conditions. Thank you!");
validation();
        } else {
            alertMessage("Please agree to the terms and conditions before submitting.");
        }
    });
    document.getElementById('acknowledgment').addEventListener('change', function() {
        if (this.checked) {
    alertMessage("Your information is acknowledged. Thank you!");
validation();
        } else {
            alertMessage("Please acknowledge the information before submitting.");
        }
    });
// Centralized validation setup function
function setupRealTimeValidation(fieldId, validationFunction, errorMessage) {
    const field = document.getElementById(fieldId);

    if (field) {
        field.addEventListener("input", function () {
            const value = this.value;

            if (!validationFunction(value)) {
                alertMessage(errorMessage);
            }
        });
    }
}

// Setup real time validations for all fields
setupRealTimeValidation(
    "firstName",
    validateAlphabetsInput,
    "Please enter a valid First Name of the Applicant using alphabets only."
);

setupRealTimeValidation(
    "lastName",
    validateAlphabetsInput,
    "Please enter a valid Last Name of the Applicant using alphabets only."
);

setupRealTimeValidation(
    "mobileNumber",
    validateMobileNumber,
    "Please enter a valid Mobile Number of the Applicant. It must consist only of digits, start with 6-9, and have exactly 10 digits."
);

setupRealTimeValidation(
    "whatsappNumber",
    validateMobileNumber,
    "Please enter a valid WhatsApp Number of the Applicant. It must consist only of digits, start with 6-9, and have exactly 10 digits."
);

setupRealTimeValidation(
    "email",
    validateEmailAddress,
    "Please enter a valid Email Address. Only @gmail.com, @outlook.com, @hotmail.com, and @yahoo.com domains are allowed."
);

setupRealTimeValidation(
    "parentFirstName",
    validateAlphabetsInput,
    "Please enter a valid First Name of the Parent/Guardian using alphabets only."
);

setupRealTimeValidation(
    "parentLastName",
    validateAlphabetsInput,
    "Please enter a valid Last Name of the Parent/Guardian using alphabets only."
);

setupRealTimeValidation(
    "parentMobile",
    validateMobileNumber,
    "Please enter a valid Mobile Number of the Parent/Guardian. It must consist only of digits, start with 6-9, and have exactly 10 digits."
);

setupRealTimeValidation(
    "parentWhatsApp",
    validateMobileNumber,
    "Please enter a valid WhatsApp Number of the Parent/Guardian. It must consist only of digits, start with 6-9, and have exactly 10 digits."
);
// Function to validate input as alphabets only
function validateAlphabetsInput(input) {
    return /^[a-zA-Z]+$/.test(input);
}
// Function to validate input as numbers only
function validateMobileNumber(number) {
    // Check if the number starts with 0, 1, 2, 3, 4, or 5
    if (/^[0-5]/.test(number)) {
        return false;
    }

    // Check if the number has the same digit repeated more than 10 times consecutively
    if (/(.)\1{9}/.test(number)) {
        return false;
    }

    // Check if the number contains symbols
    if (/[^0-9]/.test(number)) {
        return false;
    }

    // Check if the number contains alphabets
    if (/[a-zA-Z]/.test(number)) {
        return false;
}

    return true;
}
// Function for strong validation of email address
function validateEmailAddress(email) {
    let allowedDomains = ['gmail.com', 'outlook.com', 'hotmail.com', 'yahoo.com'];
    let parts = email.split('@');
    if (parts.length !== 2) {
        return false;
    }

    let domain = parts[1];
    if (!allowedDomains.includes(domain)) {
        return false;
    }

    return true;
}
    // Check if the number contains alphabets
    if (/[a-zA-Z]/.test(number)) {
        return false;
}

    return true;
}
function goToStep(step) {
    document.getElementById(`step${currentStep}`).style.display = "none";
    document.getElementById(`step${step}`).style.display = "block";
    currentStep = step;
}
document.getElementById('prev3').addEventListener('click', () => {
        goToStep(2);
  document.getElementById("div2").focus();
    });
document.getElementById('prev4').addEventListener('click', () => {
        goToStep(3);
  document.getElementById("div3").focus();
    });
document.getElementById('prev5').addEventListener('click', () => {
        goToStep(4);
  document.getElementById("div4").focus();
    });
document.getElementById('prev6').addEventListener('click', () => {
        goToStep(5);
  document.getElementById("div5").focus();
    });
document.getElementById('prev7').addEventListener('click', () => {
        goToStep(6);
  document.getElementById("div6").focus();
    });

document.getElementById('next1').addEventListener('click', () => {
    if (validateStep(1)) {
    document.getElementById("step1").style.display = "none";
goToStep(2);
  document.getElementById("div2").focus();
    }
});

document.getElementById('next2').addEventListener('click', () => {
    if (validateStep(2)) {
goToStep(3);
  document.getElementById("div3").focus();
    }
});
document.getElementById('next3').addEventListener('click', () => {
    if (validateStep(3)) {
goToStep(4);
  document.getElementById("div4").focus();
    }
});
document.getElementById('next4').addEventListener('click', () => {
    if (validateStep(4)) {
goToStep(5);
  document.getElementById("div5").focus();
    }
});

document.getElementById('next5').addEventListener('click', () => {
    if (validateStep(5)) {
goToStep(6);
  document.getElementById("div6").focus();
    }
});

document.getElementById('next6').addEventListener('click', () => {
    if (validateStep(6)) {
        // Call the function to display form data in the review step
        displayFormDataInReviewStep();
        goToStep(7); // Navigate to the review step
  document.getElementById("div7").focus();
    }
});
document.getElementById('submitBtn').addEventListener('click', () => {
    if (validateStep(7)) {
    submitForm();
}
});
function displayFormDataInReviewStep() {
    // Retrieve data from each form field in all steps
    const firstName = document.getElementById("firstName").value;
    const lastName = document.getElementById("lastName").value;
    const dob = document.getElementById("selectedDate").value;
    const gender = document.getElementById("gender").value;
    const education = document.getElementById("education").value;

    const mobileNumber = document.getElementById("mobileNumber").value;
    const whatsappNumber = document.getElementById("whatsappNumber").value;
        const email = document.getElementById("email").value;
        const state = document.getElementById("state").value;
        const city = document.getElementById("city").value;

        const parentFirstName = document.getElementById("parentFirstName").value;
        const parentLastName = document.getElementById("parentLastName").value;
        const relationship = document.getElementById("relationship").value;
        const parentMobile = document.getElementById("parentMobile").value;
        const parentWhatsApp = document.getElementById("parentWhatsApp").value;
    const disabilityType = document.getElementById("disabilityType").value;
        const disabilityPercentage = document.getElementById("disabilityPercentage").value;
        const udidNumber = document.getElementById("udidNumber").value;
        const aadhaarNumber = document.getElementById("aadhaarNumber").value;
        const termsConditions = document.getElementById("termsConditions").value;
        const acknowledgment = document.getElementById("acknowledgment").value;
    // Add more fields as needed

    // Construct a summary of the entered information
    const reviewInfo = `
        <p><strong>First Name:</strong> ${firstName}</p>
        <p><strong>Last Name:</strong> ${lastName}</p>
        <p><strong>Date of Birth:</strong> ${dob}</p>
        <p><strong>Gender:</strong> ${gender}</p>
    `;

    // Update the review step HTML to display the summary
    document.getElementById("reviewInfo").innerHTML = reviewInfo;
}
function validation() {   
setTimeout(function(){
validateAllStep();
}, 2500);
}
function validateAllStep() {
    if (validateStep(1) && validateStep(2) && validateStep(3) && validateStep(4) && validateStep(5) && validateStep(6) && validateStep(7)) {
    alertMessage("Now you are all set to submit this form, click submit button to continue!");
} else {
    validateStep(currentStep);
}
}




function submitForm() {
alertMessage("Not implemented...");

}
</script>
</body>
</html>