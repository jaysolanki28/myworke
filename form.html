Please check why the validateOtp function is not working. 
Correct the code and provide it to me.

        <div id="createAccountDiv" style="display: block;">
    <header class="headingText" id="div2" tabindex="-1">Create an Account</header>
            <form target="secret-frame" id="signUpForm">
                <label for="firstName">First Name:</label>
                <input type="text" id="firstName"><br>

                <label for="lastName">Last Name:</label>
                <input type="text" id="lastName"><br>

                <label for="gender">Gender:</label>
                <select id="gender">
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="Transgender">Transgender</option>
                </select><br>

                <label for="email">Email Address:</label>
                <input type="email" id="email"><br>
                <label for="password">Password:</label>
                <input type="password" id="password"><br>

                <label for="rePassword">Re-enter Password:</label>
                <input type="password" id="rePassword"><br>

                <label>                    <input type="checkbox" id="showPasswordCheckbox">                    Show Password                </label>

<div id="otpDiv" style="display: block;">
        <input type="tel" id="otpInput" placeholder="Enter OTP"><br>
<span id="signupOtpExpiryTimer"></span><br>
        <button type="button" id="validateOTP" onclick="validateOTP()">Create Account</button>
</div>
                <button type="button" id="sendOtpButton" onclick="checkEmailAvailability()">Send OTP</button>
            </form>
            <button onclick="toggleForms('create')">Have an account? Sign In</button>
        </div>
<iframe name="secret-frame" width="0" height="0" border="0" style="display: none;"></iframe>
<div id="alertBox">
            <p id="validationError" aria-live="assertive" role="alert"></p>
</div>
<script>
async function checkEmailAvailability() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const gender = document.getElementById('gender').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const rePassword = document.getElementById('rePassword').value;
    if (!firstName) {
        showMessage('Please enter your first name.', 'red');
        return;
    }
    if (!lastName) {
        showMessage('Please enter your last name.', 'red');
        return;
    }
    if (!gender) {
        showMessage('Please select your gender.', 'red');
        return;
    }
    if (!email) {
        showMessage('Please enter your email address.', 'red');
        return;
    }
    if (!password) {
        showMessage('Please enter password.', 'red');
        return;
    }
            if (password !== rePassword) {
                showMessage('Passwords do not match. Please re-enter.', 'red');
return;
            }

    const userData = await fetchDataFromDropbox('/user-accounts.txt');

    const emailExists = userData.some(user => user.Email === email);

    if (emailExists) {
        showMessage('Your account is already registered. Please log in using your email address and password.', 'blue');
    } else {
                sendOtp();
            }
        }
        function sendOtp() {
            const apiKey = '6F9D8F439B6A4A0D958C88B7E6DE705BF0069E776648E148DACC963CD99EDE006278F85631F95A45C43B306F465C5590';
            const senderEmail = 'jaysolanki060192@gmail.com';
            const recipientEmail = document.getElementById('email').value;
            const otp = Math.floor(100000 + Math.random() * 900000);
            const subject = 'One Time Password (OTP) for Account Verification';
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const body = `<h1>Dear ${firstName} ${lastName},</h1>
<p>Thank you for initiating an account verification. Your One-Time Password (OTP) is:</p>
<b>${otp}</b>
<p>Please enter this OTP in the designated field to complete your verification.</p>
<p>This OTP will expire in 3 minutes. If you do not receive the OTP or it expires, please contact our support team.</p>
<p>If you did not request a sign-up, please ignore this email.</p>
<h2>Important Notes:</h2>
<p>For security reasons, please do not share this OTP with anyone. Keep it confidential and use it only for the purpose of account verification.</p>
<p>And do not click on the unsubscribe link below. Doing so may cause problems in recovering your account in the future.</p>
<p>Thank you for your cooperation.</p>
<p>Sincerely,<br>
Saint Joseph's Academy</p>`;

            const data = new URLSearchParams();
            data.append('apiKey', apiKey);
            data.append('subject', subject);
            data.append('from', senderEmail);
            data.append('to', recipientEmail);
            data.append('bodyHtml', body); // Use bodyHtml to send HTML content

            fetch('https://api.elasticemail.com/v2/email/send', {
                method: 'POST',
                body: data
            })
            .then(response => response.json())
            .then(data => {
document.getElementById('firstName').disabled = true;
document.getElementById('lastName').disabled = true;
document.getElementById('gender').disabled = true;
document.getElementById('email').disabled = true;
document.getElementById('password').disabled = true;
document.getElementById('rePassword').disabled = true;
        document.getElementById('sendOtpButton').style.display = 'none';
        document.getElementById('otpDiv').style.display = 'block';
        document.getElementById("otpInput").focus();
        localStorage.setItem('otp', otp);
startOtpExpiryTime();
        showMessage('OTP sent successfully! check your mailbox.', 'green');
                console.log(JSON.stringify(data)); // stringify the response object
            })
            .catch(error => {
        showMessage('Error sending OTP. Please try again.', 'red');
                console.error(error);
            });
        }
function startOtpExpiryTime() {
    const signupExpiryTime = new Date().getTime() + 3 * 60 * 1000; // 3 minutes expiry
    localStorage.setItem('signupOtpExpiry', signupExpiryTime); // Store OTP expiry time

    // Update the remaining time every second
    signupTimeInterval = setInterval(function () {
        const currentTime = new Date().getTime();
        const remainingTime = parseInt(localStorage.getItem('signupEtpExpiry')) - currentTime;

        if (remainingTime <= 0) {
            clearInterval(signupTimeInterval); // Stop the timer when OTP expires
            localStorage.removeItem('otp'); // Remove OTP from local storage
            localStorage.removeItem('signupOtpExpiry'); // Remove OTP expiry time from local storage
            document.getElementById('signupOtpExpiryTimer').innerText = 'Expired'; // Update HTML to show OTP expired
            return;
        }

        // Display remaining time in HTML
        const minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);
        document.getElementById('signupOtpExpiryTimer').innerText = `${minutes}m ${seconds}s`;
    }, 1000);
}

function validateOTP() {
    const enteredOTP = document.getElementById('otpInput').value;
    const storedOTP = localStorage.getItem('otp');
    const signupTimeInterval = setInterval; // Define signupTimeInterval variable

    if (enteredOTP === storedOTP) {
        clearInterval(signupTimeInterval); // Clear the timer
        localStorage.removeItem('otp');
        localStorage.removeItem('signupOtpExpiry');
        document.getElementById('signupOtpExpiryTimer').style.display = 'none';
        createAccount();
    } else {
        showMessage('Invalid OTP. Please try again.', 'red');
    }
}
        async function createAccount() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const gender = document.getElementById('gender').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
const loginStatus = '0';
    let userData = await fetchDataFromDropbox('/user-accounts.txt');

    userData.push({
        FirstName: firstName,
        LastName: lastName,
        Gender: gender,
        Email: email,
        Password: password,
 LoginStatus:  loginStatus
    });

            // Save updated user data to Dropbox
            const updatedResponse = await fetch('https://content.dropboxapi.com/2/files/upload', {
                method: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + dropboxToken,
                    'Content-Type': 'application/octet-stream',
                    'Dropbox-API-Arg': JSON.stringify({
                        path: '/user-accounts.txt',
                        'mode': 'overwrite',
                        autorename: false,
                        mute: false
                    })
                },
                body: JSON.stringify(userData)
            });

        document.getElementById('createAccountDiv').style.display = 'none';
        document.getElementById('loginDiv').style.display = 'block';
document.title = "Log in Your Account";
clearFormFields();
            showMessage('Account created successfully! now log in your new account.', 'green');
        }
        function showMessage(message, color) {
            const alertBox = document.getElementById('alertBox');
            const validationError = document.getElementById('validationError');
            validationError.innerText = message;
            validationError.style.color = color;
            alertBox.style.display = 'block';
setTimeout(function(){
            validationError.innerText = "";
alertBox.style.display = 'none';
}, 15000);
        }
function generateToken(refreshToken, clientId, clientSecret) {
const url = 'https://api.dropbox.com/oauth2/token';
const data = `grant_type=refresh_token&refresh_token=${refreshToken}&client_id=${clientId}&client_secret=${clientSecret}`;
return fetch(url, {
method: 'POST',
headers: {
'Content-Type': 'application/x-www-form-urlencoded'
},
body: data
})
.then((response) => {
if (!response.ok) {
throw new Error('Failed to get access token: ' + response.statusText);
}
return response.json();
})
.then((responseData) => {
return responseData.access_token;
})
.catch((error) => {
throw new Error('Error generating access token: ' + error.message);
});
}
function checkToken() {
let localToken = JSON.parse(localStorage.getItem("localToken"));
if (localToken && localToken.expire > new Date().getTime()) {
dropboxToken = localToken.token;
} else {
generateToken('AALu1gsBgjcAAAAAAAAAATLeuJoxd86bwIAnmd9KoDsWC4lRU_SruT9ZUVrfr8hz', '7u6mvcyvv6szugw', 'gka5o3baeaw2lin')
.then((token) => {
dropboxToken = token;
var storeToken = { token: token, expire: new Date().getTime() + (3*60*60*1000)};
localStorage.setItem("localToken", JSON.stringify(storeToken));
})
.catch((error) => {
showMessage(error.message, 'red');
});
}
}
// Common function to fetch data from Dropbox
async function fetchDataFromDropbox(path) {
    const response = await fetch('https://content.dropboxapi.com/2/files/download', {
        method: 'POST',
        headers: {
            'Authorization': 'Bearer ' + dropboxToken,
            'Dropbox-API-Arg': JSON.stringify({
                path: path
            })
        }
    });
    return await response.json();
}

window.addEventListener("load", checkToken);
</script>